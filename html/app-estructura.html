<!DOCTYPE html>
<html lang="en" class="light-style layout-wide" dir="ltr" data-theme="theme-default" data-assets-path="../assets/" data-template="vertical-menu-template-free">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
	<title>App - Sismo</title>
	<meta name="description" content="" />
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />
	<!-- Core CSS -->
	<link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
	<link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
	<!-- Page CSS -->
	<!-- Helpers -->
	<script src="../assets/vendor/js/helpers.js"></script>
	<script src="../assets/js/config.js"></script>
</head>

<body>
	<div class="content-wrapper">
		<!-- Content -->
		<div class="container-xxl flex-grow-1 container-p-y">
			<!-- Basic Layout -->
			<div class="row">
				<div class="col-xl">
					<div class="text-center mb-4">
						<h2>
							METODOLOGÍA DE EVALUACIÓN POSTSÍSMICA DE NIVEL INTERMEDIO PARA EDIFICIOS DE CONCRETO
						</h2>
					</div>
					<div class="card mb-4">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0 text-uppercase">1. DEFINICIÓN DEL MODELO</h5>
						</div>
						<div class="card-body">
							<div class="row">
								<div class="row mb-3">
									<label class="col-sm-2 col-form-label">Pisos</label>
									<div class="col-sm-2">
										<input type="number" class="form-control floors" placeholder="Cantidad" title="Número de niveles sobre el nivel de banqueta" />
									</div>
								</div>
								<div class="row mb-3">
									<label class="col-sm-2 col-form-label">Columnas</label>
									<div class="col-sm-2">
										<input type="number" class="form-control columns" placeholder="Cantidad" title="Número de columnas de la planta tipo" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control columns-b" placeholder="B" min="0" title="Ancho de la columna" title="Ancho típico de la sección transversal de la columna" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control columns-h" placeholder="H" title="Alto típico de la sección transversal de la columna" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control columns-hc" placeholder="HC" title="Altura de columna" />
									</div>
								</div>
								<div class="row mb-3">
									<label class="col-sm-2 col-form-label">Vigas</label>
									<div class="col-sm-2">
										<input type="number" class="form-control beams" placeholder="Cantidad" title="Número de vigas de la planta tipo" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control beams-b" placeholder="B" title="Ancho típico de la sección transversal de la viga" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control beams-h" placeholder="H" title="Peralte típico de la sección transversal de la viga" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control beams-lv" placeholder="LV" title="Longitud de la viga" />
									</div>
								</div>
								<div class="row mb-3">
									<label class="col-sm-2 col-form-label">Muros de mampostería</label>
									<div class="col-sm-2">
										<input type="number" class="form-control walls" placeholder="Cantidad" title="Número de muros diafragma de la planta tipo" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control walls-lm" placeholder="LM" title="Longitud típica de la sección transversal del muro" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control walls-hm" placeholder="HM" title="Altura típica del muro" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control walls-em" placeholder="EM" title="Espesor típico de la sección transversal del muro" />
									</div>
								</div>
								<div class="row mb-3">
									<label class="col-sm-2 col-form-label">Losas</label>
									<div class="col-sm-2">
										<input type="number" class="form-control slabs" placeholder="Cantidad" title="Número de losas sobre el nivel de banqueta" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control slabs-ll" placeholder="LL" title="Longitud de la losa en dirección X" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control slabs-al" placeholder="AL" title="Longitud de la losa en dirección Y" />
									</div>
									<div class="col-sm-2">
										<input type="number" class="form-control slabs-el" placeholder="EL" title="Espesor típico de la losa" />
									</div>
								</div>
							</div>
						</div>
						<div class="card-footer">
							<b>Nota:</b> Todas las medidas deben ingresarse en centímetros (cm).
						</div>
					</div>
					<div class="card mb-4">
						<div class="card-footer">
							<div class="d-flex justify-content-end">
								<button type="button" class="btn btn-secondary me-1" onclick="location.reload();">Cancelar</button>
								<button type="button" class="btn btn-primary define-model-btn me-1">Confirmar</button>
								<button type="button" class="btn btn-info initialize-model-btn d-none me-1">Inicializar</button>
								<button type="button" class="btn btn-primary calculate-model-btn d-none">Simular</button>
							</div>
						</div>
					</div>
					<div class="card mb-4 d-none data">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">2. DEFINICIÓN DE COLUMNAS</h5>
						</div>
						<div class="card-body">
							<div class="table-responsive" style="max-height: 400px;">
								<table class="table table-sm table-striped">
									<thead>
										<tr>
											<th>Nivel</th>
											<th>Columna</th>
											<th title="Ancho de la sección transversal de la columna">b</th>
											<th title="Alto de la sección transversal de la columna">h</th>
											<th title="Altura de la columna">Hc</th>
											<th title="Identifique la viga ubicada a la derecha de la columna en planta">Viga Der.</th>
											<th title="Identifique la viga ubicada a la izquierda de la columna en planta">Viga Izq.</th>
											<th title="Identifique la viga ubicada arriba de la columna en planta">Viga Arr.</th>
											<th title="Identifique la viga ubicada abajo de la columna en planta">Viga Aba.</th>
											<th title="Identifique el muro ubicado a la derecha de la columna en planta">Muro Der.</th>
											<th title="Identifique el muro ubicado a la izquierda de la columna en planta">Muro Izq.</th>
											<th title="Identifique el muro ubicado ubicada arriba de la columna en planta">Muro Arr.</th>
											<th title="Identifique el muro ubicado abajo de la columna en planta">Muro Aba.</th>
											<th title="Identifique la losa de entrepiso">Losa</th>
											<th title="">SCD</th>
											<th title="">L</th>
											<th title="">f'c</th>
											<th title="">fm</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">Cant.</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">ϕ</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">Cant.</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">ϕ</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">Cant.</th>
											<th title="Distribución del acero de refuerzo longitudinal de las columnas. Ingrese el diámetro en milímetros (mm)">ϕ</th>
											<th title="Recubrimiento libre de la columna">dc´</th>
											<th title="Esfuerzo de fluencia del acero longitudinal (kg/cm^2)">fy</th>
											<th title="Esfuerzo de fluencia del acero transversal (kg/cm^2)">Fyt</th>
											<th>No. ramas en dirección X</th>
											<th>No. ramas en dirección Y</th>
											<th title="Diámetro del estribo en milímetros (mm)">ϕs</th>
											<th title="Separación de estribos">S</th>
											<th>No. barras ancladas en dirección X</th>
											<th title="Diámetro de barras ancladas en dirección X (mm)">ϕ</th>
											<th>No. barras ancladas en dirección Y</th>
											<th title="Diámetro de barras ancladas en dirección Y (mm)">ϕ</th>
											<th>No. estribos</th>
											<th>ϕ</th>
											<th>No. barras traslapadas en dirección X</th>
											<th>No. barras traslapadas en dirección Y</th>
											<th>Viga más crítica en dirección X</th>
											<th>Viga más crítica en dirección Y</th>
											<th title="Cuantía de viga crítica en dirección X">PV en dirección X</th>
											<th title="Cuantía de viga crítica en dirección Y">PV en dirección Y</th>
											<th title="Número de vigas que concurren en el nodo">nv</th>
											<th title="Número de columnas que concurren en el nodo">nc</th>
										</tr>
									</thead>
									<tbody class="columns-tbl">
										<tr class="clone-target d-none">
											<td><select class="form-select form-select-sm cl-sl-f"></select></td>
											<td><input type="text" class="form-control form-control-sm column" /></td>
											<td><input type="number" class="form-control form-control-sm column-b" /></td>
											<td><input type="number" class="form-control form-control-sm column-h" /></td>
											<td><input type="number" class="form-control form-control-sm column-hc" /></td>
											<td><select class="form-select form-select-sm column-b-r cl-sl-b"></select></td>
											<td><select class="form-select form-select-sm column-b-l cl-sl-b"></select></td>
											<td><select class="form-select form-select-sm column-b-t cl-sl-b"></select></td>
											<td><select class="form-select form-select-sm column-b-b cl-sl-b"></select></td>
											<td><select class="form-select form-select-sm column-w-r cl-sl-w"></select></td>
											<td><select class="form-select form-select-sm column-w-l cl-sl-w"></select></td>
											<td><select class="form-select form-select-sm column-w-t cl-sl-w"></select></td>
											<td><select class="form-select form-select-sm column-w-b cl-sl-w"></select></td>
											<td><select class="form-select form-select-sm column-s cl-sl-s"></select></td>
											<td><input type="number" class="form-control form-control-sm column-scd" /></td>
											<td><input type="number" class="form-control form-control-sm column-l" /></td>
											<td><input type="number" class="form-control form-control-sm column-fc" /></td>
											<td><input type="number" class="form-control form-control-sm column-fm" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-i" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-phi-i" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-ii" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-phi-ii" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-iii" /></td>
											<td><input type="number" class="form-control form-control-sm column-qty-phi-iii" /></td>
											<td><input type="number" class="form-control form-control-sm column-dc-alt" /></td>
											<td><input type="number" class="form-control form-control-sm column-fy" /></td>
											<td><input type="number" class="form-control form-control-sm column-fyt" /></td>
											<td><input type="number" class="form-control form-control-sm column-x-branches" /></td>
											<td><input type="number" class="form-control form-control-sm column-y-branches" /></td>
											<td><input type="number" class="form-control form-control-sm column-ss-phi" /></td>
											<td><input type="number" class="form-control form-control-sm column-ss" /></td>
											<td><input type="number" class="form-control form-control-sm column-x-anchored-bars" /></td>
											<td><input type="number" class="form-control form-control-sm column-x-anchored-bars-phi" /></td>
											<td><input type="number" class="form-control form-control-sm column-y-anchored-bars" /></td>
											<td><input type="number" class="form-control form-control-sm column-y-anchored-bars-phi" /></td>
											<td><input type="number" class="form-control form-control-sm column-stirrups" /></td>
											<td><input type="number" class="form-control form-control-sm column-stirrups-phi" /></td>
											<td><input type="number" class="form-control form-control-sm column-x-overlapping-bars" /></td>
											<td><input type="number" class="form-control form-control-sm column-y-overlapping-bars" /></td>
											<td><select class="form-select form-select-sm column-x-b-crit cl-sl-b"></select></td>
											<td><select class="form-select form-select-sm column-y-b-crit cl-sl-b"></select></td>
											<td><input type="number" class="form-control form-control-sm column-x-pv" /></td>
											<td><input type="number" class="form-control form-control-sm column-y-pv" /></td>
											<td><input type="number" class="form-control form-control-sm column-nv" /></td>
											<td><input type="number" class="form-control form-control-sm column-nc" /></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer">
							<b>Nota:</b> Todas las medidas se ingresan en centímetros (cm) a menos que se indique lo contrario.
						</div>
					</div>
					<div class="card mb-4 d-none data">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">3. DEFINICIÓN DE VIGAS</h5>
						</div>
						<div class="card-body">
							<div class="overflow-scroll" style="max-height: 400px;">
								<table class="table table-sm table-striped">
									<thead>
										<tr>
											<th>Nivel</th>
											<th>Viga</th>
											<th title="Ancho de la sección transversal de la viga">b</th>
											<th title="Peralte de la sección transversal de la viga">h</th>
											<th title="Longitud de la viga">Lv</th>
										</tr>
									</thead>
									<tbody class="beams-tbl">
										<tr class="clone-target d-none">
											<td><select class="form-select form-select-sm bm-sl-f"></select></td>
											<td><input type="text" class="form-control form-control-sm beam" /></td>
											<td><input type="number" class="form-control form-control-sm beam-b" /></td>
											<td><input type="number" class="form-control form-control-sm beam-h" /></td>
											<td><input type="number" class="form-control form-control-sm beam-lv" /></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer">
							<b>Nota:</b> Todas las medidas se ingresan en centímetros (cm) a menos que se indique lo contrario.
						</div>
					</div>
					<div class="card mb-4 d-none data">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">4. DEFINICIÓN DE MUROS DE MAMPOSTERÍA</h5>
						</div>
						<div class="card-body">
							<div class="overflow-scroll" style="max-height: 400px;">
								<table class="table table-sm table-striped">
									<thead>
										<tr>
											<th>Nivel</th>
											<th>Muro de mampostería</th>
											<th title="Longitud de la sección transversal del muro">Lm</th>
											<th title="Altura del muro">Hm</th>
											<th title="Espesor de la losa">em</th>
										</tr>
									</thead>
									<tbody class="walls-tbl">
										<tr class="clone-target d-none">
											<td><select class="form-select form-select-sm wl-sl-f"></select></td>
											<td><input type="text" class="form-control form-control-sm wall" /></td>
											<td><input type="number" class="form-control form-control-sm wall-lm" /></td>
											<td><input type="number" class="form-control form-control-sm wall-hm" /></td>
											<td><input type="number" class="form-control form-control-sm wall-em" /></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="card mb-4 d-none data">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">5. DEFINICIÓN DE MUROS DE LOSAS</h5>
						</div>
						<div class="card-body">
							<table class="table table-sm table-striped">
								<thead>
									<tr>
										<th>Nivel</th>
										<th>Losa</th>
										<th title="Longitud de la losa en dirección X">Ll</th>
										<th title="Longitud de la losa en dirección Y">Al</th>
										<th title="Espesor de la losa">el</th>
									</tr>
								</thead>
								<tbody class="slabs-tbl">
									<tr class="clone-target d-none">
										<td><select class="form-select form-select-sm sb-sl-f"></select></td>
										<td><input type="text" class="form-control form-control-sm slab" /></td>
										<td><input type="number" class="form-control form-control-sm slab-ll" /></td>
										<td><input type="number" class="form-control form-control-sm slab-al" /></td>
										<td><input type="number" class="form-control form-control-sm slab-el" /></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="card mb-4 d-none data">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">6. DEFINICIÓN DE CARGAS</h5>
						</div>
						<div class="card-body">
							<table class="table table-sm table-striped">
								<thead>
									<tr>
										<th title="Aceleración sísmica en dirección x (cm/s^2)">Sa en dirección X</th>
										<th title="Aceleración sísmica en dirección y (cm/s^2)">Sa en dirección Y</th>
									</tr>
								</thead>
								<tbody class="loads-tbl">
									<tr class="clone-target d-none">
										<td><input type="number" class="form-control form-control-sm column-x-sa" /></td>
										<td><input type="number" class="form-control form-control-sm column-y-sa" /></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div id="step-i" class="card mb-4 step-i d-none">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">7. RESULTADOS DEL PASO 1 - ENTREPISO CRÍTICO</h5>
						</div>
						<div class="card-body">
							<table class="table table-sm table-striped mb-3">
								<thead>
									<tr>
										<th colspan="4">Dirección X</th>
									</tr>
									<tr>
										<th>Nivel</th>
										<th>Ki</th>
										<th>ϕ</th>
										<th>Δϕ</th>
									</tr>
								</thead>
								<tbody id="x-lvls" class="x-lvls">
									<tr class="x-lvl-clonable d-none">
										<td class="lvl-label"></td>
										<td class="lvl-ki"></td>
										<td class="lvl-phi"></td>
										<td class="lvl-delta-phi"></td>
									</tr>
								</tbody>
							</table>
							<p>El entrepiso crítico en la dirección X es el nivel <span class="x-lvl-txt" /></p>
							<table class="table table-sm table-striped mb-3">
								<thead>
									<tr>
										<th colspan="4">Dirección Y</th>
									</tr>
									<tr>
										<th>Nivel</th>
										<th>Ki</th>
										<th>ϕ</th>
										<th>Δϕ</th>
									</tr>
								</thead>
								<tbody id="y-lvls" class="y-lvls">
									<tr class="y-lvl-clonable d-none">
										<td class="lvl-label"></td>
										<td class="lvl-ki"></td>
										<td class="lvl-phi"></td>
										<td class="lvl-delta-phi"></td>
									</tr>
								</tbody>
							</table>
							<p>El entrepiso crítico en la dirección Y es el nivel <span class="x-lvl-txt" /></p>
						</div>
					</div>
					<div id="step-ii" class="card mb-4 step-ii d-none">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">8. RESULTADOS DEL PASO 2 - EVALUACIÓN DEL MECANISMO DE FALLA</h5>
						</div>
						<div class="card-body">
							<table class="table table-sm table-striped mb-3">
								<thead>
									<tr>
										<th>Nivel</th>
										<th>Columna</th>
										<th>Resultado en Dirección X</th>
										<th>Resultado en Dirección Y</th>
									</tr>
								</thead>
								<tbody id="cols-step" class="cols-step">
									<tr class="col-step-clonable d-none">
										<td class="floor"></td>
										<td class="column"></td>
										<td class="x_result"></td>
										<td class="y_result"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div id="step-iii" class="card step-iii d-none">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h5 class="mb-0">9. RESULTADOS DEL PASO 3 - RELACIÓN DEMANDA CAPACIDAD</h5>
						</div>
						<div class="card-body">
							<table class="table table-sm table-striped mb-3">
								<thead>
									<tr>
										<th class="col">Nivel</th>
										<th class="col">Dirección X</th>
										<th class="col">Dirección Y</th>
									</tr>
								</thead>
								<tbody id="finals-step" class="finals-step">
									<tr class="final-step-clonable d-none">
										<td class="floor"></td>
										<td class="x-value"></td>
										<td class="y-value"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- / Content -->
	<!-- Footer -->
	<footer class="content-footer footer bg-footer-theme">
		<div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
			<div class="mb-2 mb-md-0">
				©
				<script>
				document.write(new Date().getFullYear())
				</script> Gianella Adriana Valencia Ronquillo, Plantilla por <a href="https://themeselection.com" target="_blank" class="footer-link fw-medium">ThemeSelection</a>.
			</div>
		</div>
	</footer>
	<!-- / Footer -->
	<div class="content-backdrop fade"></div>
	</div>
	<style>
	.columns-tbl input,
	.columns-tbl select {
		width: 100px;
	}
	</style>
	<!-- Core JS -->
	<!-- build:js assets/vendor/js/core.js -->
	<script src="../assets/vendor/libs/jquery/jquery.js"></script>
	<script src="../assets/vendor/libs/popper/popper.js"></script>
	<script src="../assets/vendor/js/bootstrap.js"></script>
	<!-- endbuild -->
	<!-- Vendors JS -->
	<!-- Main JS -->
	<script src="../assets/js/main.js"></script>
	<script>
	function Floor(floor) {
		this.floor = floor;
	}

	function Column(floor, col, b, h, hc) {
		this.floor = floor;
		this.col = col;
		this.b = b;
		this.h = h;
		this.hc = hc;
		this.ac = b * h;
		this.w = ((b * h * hc) * (2.4 * 1000 / Math.pow(100, 3)));
	}

	function Beam(floor, beam, b, h, lv) {
		this.floor = floor;
		this.beam = beam;
		this.b = b;
		this.h = h;
		this.lv = lv;
	}

	function Wall(floor, wall, lm, hm, em) {
		this.floor = floor;
		this.wall = wall;
		this.lm = lm;
		this.hm = hm;
		this.em = em;
		this.am = lm * em;
	}

	function Slab(floor, slab, ll, al, el) {
		this.floor = floor;
		this.slab = slab;
		this.ll = ll;
		this.al = al;
		this.el = el;
	}

	function Load(floor, col, load, x_sa, y_sa) {
		this.floor = floor;
		this.col = col;
		this.load = load;
		this.x_sa = x_sa;
		this.y_sa = y_sa;
	}

	function DeformedShape(floors, kis) {
		var vector = {};
		switch (floors) {
			case 2:
				vector['1'] = 1;
				vector['0'] = (1.5 * kis[1]) / ((1.5 * kis[1]) + 1.5 * kis[0]);
				return vector;
			case 3:
				vector['2'] = 1;
				vector['1'] = ((2 * kis[1] * kis[2]) + (1.67 * kis[0] * kis[2])) / ((2 * kis[1] * kis[2]) + (1.67 * kis[0] * kis[2]) + (kis[0] * kis[1]));
				vector['0'] = (2 * kis[1] * kis[2]) / ((2 * kis[1] * kis[2]) + (1.67 * kis[0] * kis[2]) + (kis[0] * kis[1]));
				return vector;
			case 4:
				vector['3'] = 1;
				vector['2'] = ((2.5 * kis[1] * kis[2] * kis[3]) + (2.25 * kis[0] * kis[2] * kis[3]) + (1.75 * kis[0] * kis[1] * kis[3])) / ((2.5 * kis[1] * kis[2] * kis[3]) + (2.25 * kis[0] * kis[2] * kis[3]) + (1.75 * kis[0] * kis[1] * kis[3]) + (kis[0] * kis[1] * kis[2]));
				vector['1'] = ((2.5 * kis[1] * kis[2] * kis[3]) + (2.25 * kis[0] * kis[2] * kis[3])) / ((2.5 * kis[1] * kis[2] * kis[3]) + (2.25 * kis[0] * kis[2] * kis[3]) + (1.75 * kis[0] * kis[1] * kis[3]) + (kis[0] * kis[1] * kis[2]));
				vector['0'] = (2.5 * kis[1] * kis[2] * kis[3]) / ((2.5 * kis[1] * kis[2] * kis[3]) + (2.25 * kis[0] * kis[2] * kis[3]) + (1.75 * kis[0] * kis[1] * kis[3]) + (kis[0] * kis[1] * kis[2]));
				return vector;
			default:
				return null;
		}
	}

	const getAverage = (array) => array.reduce((sum, currentValue) => sum + currentValue, 0) / array.length;

	$(function() {

		var data = [
			[25, 25, 250, 'F1B1', null, 'F1B7', null, null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B1', 'F1B7', 0.003619115, 0.003619115, 2, 2],
			[25, 75, 250, 'F1B2', 'F1B1', 'F1B9', null, null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 10, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 5, 12, 1, 12, 10, 10, 'F1B2', 'F1B9', 0.007238229, 0.003619115, 3, 2],
			[25, 25, 250, null, 'F1B2', 'F1B11', null, null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B2', 'F1B11', 0.003619115, 0.003619115, 2, 2],
			[25, 25, 250, 'F1B3', null, 'F1B8', 'F1B7', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B3', 'F1B7', 0.003619115, 0.007238229, 3, 2],
			[25, 25, 250, 'F1B4', 'F1B3', 'F1B10', 'F1B9', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B4', 'F1B9', 0.011862654, 0.011862654, 3, 2],
			[25, 25, 250, null, 'F1B4', 'F1B12', 'F1B11', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B4', 'F1B11', 0.011862654, 0.011862654, 2, 2],
			[25, 25, 250, 'F1B5', null, null, 'F1B8', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B5', 'F1B8', 0.003619115, 0.003619115, 2, 2],
			[25, 25, 250, 'F1B6', 'F1B5', null, 'F1B10', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B6', 'F1B10', 0.007238229, 0.007238229, 3, 2],
			[25, 25, 250, null, 'F1B6', null, 'F1B12', null, null, null, null, 'L1', 0.02, 0.005, 252.18, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F1B6', 'F1B12', 0.003619115, 0.003619115, 2, 2],
			[25, 25, 250, 'F2B1', null, 'F2B7', null, null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B1', 'F2B7', 0.003619115, 0.003619115, null, null],
			[25, 75, 250, 'F2B2', 'F2B1', 'F2B9', null, null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 10, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 5, 12, 1, 12, 10, 10, 'F2B1', 'F2B9', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, null, 'F2B2', 'F2B11', null, null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B2', 'F2B11', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F2B3', null, 'F2B8', 'F2B7', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B2', 'F2B7', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F2B4', 'F2B3', 'F2B10', 'F2B9', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B3', 'F2B9', 0.011862654, 0.011862654, null, null],
			[25, 25, 250, null, 'F2B4', 'F2B12', 'F2B11', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B4', 'F2B11', 0.011862654, 0.011862654, null, null],
			[25, 25, 250, 'F2B5', null, null, 'F2B8', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B4', 'F2B8', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F2B6', 'F2B5', null, 'F2B10', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B5', 'F2B10', 0.007238229, 0.007238229, null, null],
			[25, 25, 250, null, 'F2B6', null, 'F2B12', null, null, null, null, 'L2', 0.02, 0.005, 272.26, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F2B6', 'F2B12', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F3B1', null, 'F3B7', null, null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B1', 'F3B7', 0.003619115, 0.003619115, null, null],
			[25, 75, 250, 'F3B2', 'F3B1', 'F3B9', null, null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 10, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 5, 12, 1, 12, 10, 10, 'F3B2', 'F3B9', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, null, 'F3B2', 'F3B11', null, null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B2', 'F3B11', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F3B3', null, 'F3B8', 'F3B7', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B3', 'F3B7', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F3B4', 'F3B3', 'F3B10', 'F3B9', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B4', 'F3B9', 0.011862654, 0.011862654, null, null],
			[25, 25, 250, null, 'F3B4', 'F3B12', 'F3B11', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B4', 'F3B11', 0.011862654, 0.011862654, null, null],
			[25, 25, 250, 'F3B5', null, null, 'F3B8', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B5', 'F3B8', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, 'F3B6', 'F3B5', null, 'F3B10', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B6', 'F3B10', 0.003619115, 0.003619115, null, null],
			[25, 25, 250, null, 'F3B6', null, 'F3B12', null, null, null, null, 'L3', 0.02, 0.005, 258.19, 20, 4, 12, null, null, null, null, 3, 4833.45, 4894.64, 2, 2, 8, 25, 2, 12, 2, 12, 1, 12, 4, 4, 'F3B6', 'F3B12', 0.003619115, 0.003619115, null, null]
		];

		var loadsData = [
			['F1C1', 279.8, 379.3],
			['F1C2', 279.8, 379.3],
			['F1C3', 279.8, 379.3],
			['F1C4', 279.8, 379.3],
			['F1C5', 279.8, 379.3],
			['F1C6', 279.8, 379.3],
			['F1C7', 279.8, 379.3],
			['F1C8', 279.8, 379.3],
			['F1C9', 279.8, 379.3],
		];

		var beamsData = {
			'F1B1': { b: 25, h: 50, lv: 300 },
			'F1B2': { b: 25, h: 50, lv: 600 },
			'F1B3': { b: 25, h: 50, lv: 300 },
			'F1B4': { b: 25, h: 50, lv: 600 },
			'F1B5': { b: 25, h: 50, lv: 300 },
			'F1B6': { b: 25, h: 50, lv: 500 },
			'F1B7': { b: 25, h: 50, lv: 500 },
			'F1B8': { b: 25, h: 50, lv: 550 },
			'F1B9': { b: 25, h: 50, lv: 400 },
			'F1B10': { b: 25, h: 50, lv: 600 },
			'F1B11': { b: 25, h: 50, lv: 400 },
			'F1B12': { b: 25, h: 50, lv: 600 },
			'F2B1': { b: 25, h: 50, lv: 300 },
			'F2B2': { b: 25, h: 50, lv: 600 },
			'F2B3': { b: 25, h: 50, lv: 300 },
			'F2B4': { b: 25, h: 50, lv: 600 },
			'F2B5': { b: 25, h: 50, lv: 300 },
			'F2B6': { b: 25, h: 50, lv: 500 },
			'F2B7': { b: 25, h: 50, lv: 500 },
			'F2B8': { b: 25, h: 50, lv: 550 },
			'F2B9': { b: 25, h: 50, lv: 400 },
			'F2B10': { b: 25, h: 50, lv: 600 },
			'F2B11': { b: 25, h: 50, lv: 400 },
			'F2B12': { b: 25, h: 50, lv: 600 },
			'F3B1': { b: 25, h: 50, lv: 300 },
			'F3B2': { b: 25, h: 50, lv: 600 },
			'F3B3': { b: 25, h: 50, lv: 300 },
			'F3B4': { b: 25, h: 50, lv: 600 },
			'F3B5': { b: 25, h: 50, lv: 300 },
			'F3B6': { b: 25, h: 50, lv: 500 },
			'F3B7': { b: 25, h: 50, lv: 500 },
			'F3B8': { b: 25, h: 50, lv: 550 },
			'F3B9': { b: 25, h: 50, lv: 400 },
			'F3B10': { b: 25, h: 50, lv: 600 },
			'F3B11': { b: 25, h: 50, lv: 400 },
			'F3B12': { b: 25, h: 50, lv: 600 }
		}

		var wallsData = {

		}

		var slabsData = {
			'L1': { ll: 1283, al: 1075, el: 15 },
			'L2': { ll: 1283, al: 1075, el: 15 },
			'L3': { ll: 1283, al: 1075, el: 15 }
		}

		// TODO
		// Add rows
		// Delete rows		
		// Listener on add, delete and change for options
		// parametrizar campos que actualmente estan fijos

		var floorsMap = {};
		var columnsMap = {};
		var beamsMap = {};
		var wallsMap = {};
		var slabsMap = {};
		var loadsMap = {};

		$('.floors').val(3);
		$('.columns').val(9);
		$('.beams').val(12);
		$('.walls').val(0);
		$('.slabs').val(3);

		$('.columns-b').val(25);
		$('.columns-h').val(25);
		$('.columns-hc').val(250);

		$('.beams-b').val(25);
		$('.beams-h').val(50);
		$('.beams-lv').val(300);

		$('.walls-lm').val(0);
		$('.walls-hm').val(0);
		$('.walls-em').val(0);

		$('.slabs-ll').val(1283);
		$('.slabs-al').val(1075);
		$('.slabs-el').val(15);

		$('.define-model-btn').on('click', function() {

			//if(!confirm('¿Está seguro?'))
			//	return false;

			var floors = $('.floors').val();
			var columns = $('.columns').val();
			var beams = $('.beams').val();
			var walls = $('.walls').val();
			var slabs = $('.slabs').val();

			if (floors < 0 || floors > 4) {
				alert('El número de pisos no puede se menor que 0 o mayor que 4')
				return false;
			}

			$('.data').addClass('d-none');

			if (!floors || floors <= 0) {
				alert('Indicar el número de pisos');
			} else if (!columns || columns <= 0) {
				alert('Indicar el número de columnas');
			} else if (!beams || beams <= 0) {
				alert('Indicar el número de vigas');
			} else if (!walls || walls < 0) {
				alert('Indicar el número de muros de mampostería');
			} else if (!slabs || slabs <= 0) {
				alert('Indicar el número de losas');
			} else {
				var floorOpts = [];
				for (var floor = 1; floor <= floors; floor++) {
					floorOpts.push(new Option('PISO ' + floor, 'F' + floor));
					var fl = new Floor(floor);
					floorsMap['F' + floor] = fl;
				}
				$('.columns-tbl .cloned').empty();
				for (var floor = 1; floor <= floors; floor++) {
					for (var column = 1; column <= columns; column++) {
						var cloned = $('.columns-tbl .clone-target').clone()
							.removeClass('clone-target')
							.removeClass('d-none')
							.addClass('cloned');
						$.each(floorOpts, function(opt) {
							cloned.find('.cl-sl-f').append($('<option>', {
								value: floorOpts[opt].value,
								text: floorOpts[opt].text
							}));
						});
						cloned.find('.cl-sl-f').val('F' + floor);
						cloned.find('.column').val('C' + column);
						cloned.find('.column-b').val($('.columns-b').val());
						cloned.find('.column-h').val($('.columns-h').val());
						cloned.find('.column-hc').val($('.columns-hc').val());
						$('.columns-tbl tr:last').before(cloned);
						columnsMap['F' + floor + 'C' + column] = new Column(floorsMap['F' + floor], 'C' + column, $('.columns-b').val(), $('.columns-h').val(), $('.columns-hc').val());
					}
				}
				$('.beams-tbl .cloned').empty();
				for (var floor = 1; floor <= floors; floor++) {
					for (var beam = 1; beam <= beams; beam++) {
						var cloned = $('.beams-tbl .clone-target').clone()
							.removeClass('clone-target')
							.removeClass('d-none')
							.addClass('cloned');
						$.each(floorOpts, function(opt) {
							cloned.find('.bm-sl-f').append($('<option>', {
								value: floorOpts[opt].value,
								text: floorOpts[opt].text
							}));
						});
						cloned.find('.bm-sl-f').val('F' + floor);
						cloned.find('.beam').val('B' + beam);
						cloned.find('.beam').data('floor-label', 'PISO ' + floor);
						cloned.find('.beam').data('floor-value', 'F' + floor);
						cloned.find('.beam-b').val($('.beams-b').val());
						cloned.find('.beam-h').val($('.beams-h').val());
						cloned.find('.beam-lv').val($('.beams-lv').val());
						$('.beams-tbl tr:last').before(cloned);
						beamsMap['F' + floor + 'B' + beam] = new Beam(floorsMap['F' + floor], 'B' + beam, $('.beams-b').val(), $('.beams-h').val(), $('.beams-lv').val());
					}
				}
				$('.walls-tbl .cloned').empty();
				for (var floor = 1; floor <= floors; floor++) {
					for (var wall = 1; wall <= walls; wall++) {
						var cloned = $('.walls-tbl .clone-target').clone()
							.removeClass('clone-target')
							.removeClass('d-none')
							.addClass('cloned');
						$.each(floorOpts, function(opt) {
							cloned.find('.wl-sl-f').append($('<option>', {
								value: floorOpts[opt].value,
								text: floorOpts[opt].text
							}));
						});
						cloned.find('.wl-sl-f').val('F' + floor);
						cloned.find('.wall').val('W' + wall);
						cloned.find('.wall').data('floor-label', 'PISO ' + floor);
						cloned.find('.wall').data('floor-value', 'F' + floor);
						cloned.find('.wall-lm').val($('.walls-lm').val());
						cloned.find('.wall-hm').val($('.walls-hm').val());
						cloned.find('.wall-em').val($('.walls-em').val());
						$('.walls-tbl tr:last').before(cloned);
						walls['F' + floor + 'B' + beam] = new Wall(floorsMap['F' + floor], 'W' + wall, $('.walls-lm').val(), $('.walls-hm').val(), $('.walls-em').val());
					}
				}
				if (walls > 0) {
					$('.walls-tbl').parent().removeClass('d-none');
				}
				$('.slabs-tbl .cloned').empty();
				for (var slab = 1; slab <= slabs; slab++) {
					var cloned = $('.slabs-tbl .clone-target').clone()
						.removeClass('clone-target')
						.removeClass('d-none')
						.addClass('cloned');
					$.each(floorOpts, function(opt) {
						cloned.find('.sb-sl-f').append($('<option>', {
							value: floorOpts[opt].value,
							text: floorOpts[opt].text
						}));
					});
					cloned.find('.sb-sl-f').val('F' + slab);
					cloned.find('.slab').val('L' + slab);
					cloned.find('.slab').data('floor-label', 'PISO ' + slab);
					cloned.find('.slab').data('floor-value', 'L' + slab);
					cloned.find('.slab-ll').val($('.slabs-ll').val());
					cloned.find('.slab-al').val($('.slabs-al').val());
					cloned.find('.slab-el').val($('.slabs-el').val());
					$('.slabs-tbl tr:last').before(cloned);
					slabsMap['S' + slab] = new Slab(floorsMap['F' + slab], slab, $('.slabs-ll').val(), $('.slabs-al').val(), $('.slabs-el').val());
				}
				for (var load = 1; load <= columns; load++) {
					var cloned = $('.loads-tbl .clone-target').clone()
						.removeClass('clone-target')
						.removeClass('d-none')
						.addClass('cloned');
					cloned.find('.column-x-sa').val(load);
					cloned.find('.column-y-sa').val(load);
					cloned.find('.column-nv').val(load);
					cloned.find('.column-nc').val(load);
					$('.loads-tbl tr:last').before(cloned);
					loadsMap[1] = null;
				}

				$('.beam').first().trigger('change');
				$('.wall').first().trigger('change');
				$('.slab').first().trigger('change');
				$('.data').removeClass('d-none');
				$('.define-model-btn').addClass('d-none');
				$('.initialize-model-btn').removeClass('d-none');
				$('.calculate-model-btn').removeClass('d-none');
			}

		});

		$('body').on('change', '.beam', function() {

			var opts = [new Option('', null)];

			$('.beam').each(function() {
				if ($(this).data('floor-value')) {
					var text = $(this).data('floor-label') + ' - ' + $(this).val();
					var value = $(this).data('floor-value') + $(this).val();
					opts.push(new Option(text, value));
				}
			});

			$('.cl-sl-b').empty();

			$.each(opts, function(opt) {
				$('.cl-sl-b').append(opts[opt]);
			});

		});

		$('body').on('change', '.wall', function() {

			var opts = [new Option('', null)];

			$('.wall').each(function() {
				if ($(this).data('floor-value')) {
					var text = $(this).data('floor-label') + ' - ' + $(this).val();
					var value = $(this).data('floor-value') + $(this).val();
					opts.push(new Option(text, value));
				}
			});

			$('.cl-sl-w').empty();

			$.each(opts, function(opt) {
				$('.cl-sl-w').append(opts[opt]);
			});

		});

		$('body').on('change', '.slab', function() {

			var opts = [new Option('', null)];

			$('.slab').each(function() {
				if ($(this).data('floor-value')) {
					var text = $(this).data('floor-label') + ' - ' + $(this).val();
					var value = $(this).data('floor-value');
					opts.push(new Option(text, value));
				}
			});

			$('.cl-sl-s').empty();

			$.each(opts, function(opt) {
				$('.cl-sl-s').append(opts[opt]);
			});

		});

		$('.initialize-model-btn').on('click', function() {

			$('.columns-tbl .cloned').each(function(idx) {
				var row = $(this);
				var column = data[idx];
				if (column) {
					row.find('.column-b').val(column[0]);
					row.find('.column-h').val(column[1]);
					row.find('.column-hc').val(column[2]);
					row.find('.column-b-r').val(column[3]);
					row.find('.column-b-l').val(column[4]);
					row.find('.column-b-t').val(column[5]);
					row.find('.column-b-b').val(column[6]);
					row.find('.column-w-r').val(column[7]);
					row.find('.column-w-l').val(column[8]);
					row.find('.column-w-t').val(column[9]);
					row.find('.column-w-b').val(column[10]);
					row.find('.column-s').val(column[11]);
					row.find('.column-scd').val(column[12]);
					row.find('.column-l').val(column[13]);
					row.find('.column-fc').val(column[14]);
					row.find('.column-fm').val(column[15]);
					row.find('.column-qty-i').val(column[16]);
					row.find('.column-qty-phi-i').val(column[17]);
					row.find('.column-qty-ii').val(column[18]);
					row.find('.column-qty-phi-ii').val(column[19]);
					row.find('.column-qty-iii').val(column[20]);
					row.find('.column-qty-phi-iii').val(column[21]);
					row.find('.column-dc-alt').val(column[22]);
					row.find('.column-fy').val(column[23]);
					row.find('.column-fyt').val(column[24]);
					row.find('.column-x-branches').val(column[25]);
					row.find('.column-y-branches').val(column[26]);
					row.find('.column-ss-phi').val(column[27]);
					row.find('.column-ss').val(column[28]);
					row.find('.column-x-anchored-bars').val(column[29]);
					row.find('.column-x-anchored-bars-phi').val(column[30]);
					row.find('.column-y-anchored-bars').val(column[31]);
					row.find('.column-y-anchored-bars-phi').val(column[32]);
					row.find('.column-stirrups').val(column[33]);
					row.find('.column-stirrups-phi').val(column[34]);
					row.find('.column-x-overlapping-bars').val(column[35]);
					row.find('.column-y-overlapping-bars').val(column[36]);
					row.find('.column-x-b-crit').val(column[37]);
					row.find('.column-y-b-crit').val(column[38]);
					row.find('.column-x-pv').val(column[39]);
					row.find('.column-y-pv').val(column[40]);
					row.find('.column-nv').val(column[41]);
					row.find('.column-nc').val(column[42]);
				}
			});

			$('.beams-tbl .cloned').each(function(idx) {
				var row = $(this);
				if (row.find('.beam').data('floor-value')) {
					var beam = beamsData[row.find('.beam').data('floor-value') + row.find('.beam').val()];
					if (beam) {
						row.find('.beam-b').val(beam.b);
						row.find('.beam-h').val(beam.h);
						row.find('.beam-lv').val(beam.lv);
					}
				}
			});

			$('.loads-tbl .cloned').each(function(idx) {
				var row = $(this);
				var column = loadsData[idx];
				if (column) {
					row.find('.column-x-sa').val(column[1]);
					row.find('.column-y-sa').val(column[2]);
				}
			});

			$('.initialize-model-btn').addClass('d-none');

		});

		$('.calculate-model-btn').on('click', function() {

			slabsMap = {};

			$('.slabs-tbl .cloned').each(function() {
				var row = $(this);
				var floor = row.find('.sb-sl-f').val();
				var slab = row.find('.slab').val();
				var slabLL = row.find('.slab-ll').val();
				var slabAL = row.find('.slab-al').val();
				var slabEL = row.find('.slab-el').val();
				slabsMap[slab] = new Slab(floorsMap[floor], slab, slabLL, slabAL, slabEL);
			});

			beamsMap = {};

			$('.beams-tbl .cloned').each(function() {
				var row = $(this);
				var floor = row.find('.bm-sl-f').val();
				var beam = row.find('.beam').val();
				var beamB = row.find('.beam-b').val();
				var beamH = row.find('.beam-h').val();
				var beamLV = row.find('.beam-lv').val();
				beamsMap[floor + beam] = new Beam(floorsMap[floor], beam, beamB, beamH, beamLV);
			});

			wallsMap = {};

			$('.walls-tbl .cloned').each(function() {
				var row = $(this);
				var floor = row.find('.wl-sl-f').val();
				var wall = row.find('.wall').val();
				var wallLM = row.find('.wall-lm').val();
				var wallHM = row.find('.wall-hm').val();
				var beamEM = row.find('.wall-em').val();
				wallsMap[floor + wall] = new Wall(floorsMap[floor], wall, wallLM, wallHM, beamEM);
			});

			columnsMap = {};
			x_kiMap = {};
			y_kiMap = {};
			pgMap = {};
			x_rcMap = {};
			y_rcMap = {};
			x_ohookcMap = {};
			y_ohookcMap = {};

			$('.columns-tbl .cloned').each(function(idx) {

				// step i

				var row = $(this);
				var floor = row.find('.cl-sl-f').val();
				var col = row.find('.column').val();
				var colB = row.find('.column-b').val();
				var colH = row.find('.column-h').val();
				var colHC = row.find('.column-hc').val();
				var column = new Column(floorsMap[floor], col, colB, colH, colHC);
				column.br = beamsMap[row.find('.column-b-r').val()];
				column.bl = beamsMap[row.find('.column-b-l').val()];
				column.bt = beamsMap[row.find('.column-b-t').val()];
				column.bb = beamsMap[row.find('.column-b-b').val()];
				column.bw = 0;
				if (column.br)
					column.bw += ((column.br.b * column.br.h * column.br.lv) / 2);
				if (column.bl)
					column.bw += ((column.bl.b * column.bl.h * column.bl.lv) / 2);
				if (column.bt)
					column.bw += ((column.bt.b * column.bt.h * column.bt.lv) / 2);
				if (column.bb)
					column.bw += ((column.bb.b * column.bb.h * column.bb.lv) / 2);
				column.bw = column.bw * (2.4 * 1000 / Math.pow(100, 3));
				column.wr = wallsMap[row.find('.column-w-r').val()];
				column.wl = wallsMap[row.find('.column-w-l').val()];
				column.wt = wallsMap[row.find('.column-w-t').val()];
				column.wb = wallsMap[row.find('.column-w-b').val()];
				column.ww = 0;
				if (column.wr)
					column.ww += ((column.wr.lm * column.wr.hm * column.wr.em) / 2);
				if (column.wl)
					column.ww += ((column.wl.lm * column.wl.hm * column.wl.em) / 2);
				if (column.wt)
					column.ww += ((column.wt.lm * column.wt.hm * column.wt.em) / 2);
				if (column.wb)
					column.ww += ((column.wb.lm * column.wb.hm * column.wb.em) / 2);
				column.ww = column.ww * (1.9 * 1000 / Math.pow(100, 3));
				column.s = slabsMap[row.find('.column-s').val()];
				column.at = 0;
				var brlv = 0;
				var bllv = 0;
				var btlv = 0;
				var bblv = 0;
				if (column.br)
					brlv = column.br.lv;
				if (column.bl)
					bllv = column.bl.lv;
				if (column.bt)
					btlv = column.bt.lv;
				if (column.bb)
					bblv = column.bb.lv;
				column.at = ((brlv / 2) + (bllv / 2)) * ((btlv / 2) + (bblv / 2));
				column.sw = (column.at) * column.s.el * (2.4 * 1000 / Math.pow(100, 3));
				column.scd = row.find('.column-scd').val();
				column.scdw = column.scd * column.at;
				column.l = row.find('.column-l').val();
				column.lw = column.l * column.at;
				column.pg = column.w + column.bw + column.ww + column.sw + column.scdw + column.lw;
				if (pgMap[column.floor.floor] == undefined) {
					pgMap[column.floor.floor] = 0;
				}
				pgMap[column.floor.floor] += column.pg;
				column.pga = column.pg * (Object.keys(floorsMap).length - (column.floor.floor - 1));
				column.fc = row.find('.column-fc').val();
				if (column.fc <= 200)
					column.ec = 8000 * Math.sqrt(column.fc);
				else
					column.ec = 14000 * Math.sqrt(column.fc);
				column.v = column.pga / (column.b * column.h * column.fc);
				if (column.v >= 0.1)
					column.alpha = 0.5;
				else
					column.alpha = 0.33;
				column.fm = row.find('.column-fm').val();
				column.uy = 2;
				column.ty = 0.2 / 100;

				// En dirección X se intercambia la base con la altura, en dirección Y se mantienen los valores
				var newH = column.b;
				var newB = column.h;

				column.x_kcol = ((column.ac * column.alpha * column.ec) / column.hc) * Math.pow((newH / column.hc), 2);
				column.y_kcol = ((column.ac * column.alpha * column.ec) / column.hc) * Math.pow((newB / column.hc), 2);
				// TODO 
				// Revisar cálculo contra el excel
				if (column.wr && column.wl)
					column.kmur = (((column.wr.am / 2) + (column.wl.am / 2)) / column.hc) *
					((0.1 * column.fm) /
						(column.uy * column.ty * Math.sqrt((1 + (Math.pow(column.wr.hm, 2) + Math.pow(column.wl.hm, 2))) / (
							(Math.pow(column.wr.lm / 2, 2) + Math.pow(column.wl.lm / 2, 2))))));
				else
					column.kmur = 0;
				column.x_ki = column.x_kcol + column.kmur;
				column.y_ki = column.y_kcol + column.kmur;
				if (x_kiMap[column.floor.floor] == undefined) {
					x_kiMap[column.floor.floor] = 0;
				}
				x_kiMap[column.floor.floor] += column.x_ki;
				if (y_kiMap[column.floor.floor] == undefined) {
					y_kiMap[column.floor.floor] = 0;
				}
				y_kiMap[column.floor.floor] += column.y_ki;

				// step ii

				/* beautify preserve:start */
				column.qtyI = row.find('.column-qty-i').val() ?? 0;
				column.qtyPhiI = row.find('.column-qty-phi-i').val() ?? 0;
				column.qtyII = row.find('.column-qty-ii').val() ?? 0;
				column.qtyPhiII = row.find('.column-qty-phi-ii').val() ?? 0;
				column.qtyIII = row.find('.column-qty-iii').val() ?? 0;
				column.qtyPhiIII = row.find('.column-qty-phi-iii').val() ?? 0;
				/* beautify preserve:end */
				column.ast = ((Math.PI * Math.pow((column.qtyPhiI / 10), 2) / 4) * column.qtyI) +
					((Math.PI * Math.pow((column.qtyPhiII / 10), 2) / 4) * column.qtyII) +
					((Math.PI * Math.pow((column.qtyPhiIII / 10), 2) / 4) * column.qtyIII);
				column.x_dc = 0.8 * newH;
				column.y_dc = 0.8 * newB;
				column.dcAlt = row.find('.column-dc-alt').val();
				column.fy = row.find('.column-fy').val();
				column.lambdaR = 1;
				column.x_vcy = column.lambdaR * (((column.pga / column.hc) * (newH - (1.2 * column.pga / (column.fc * newB)))) + ((column.ast * column.fy / column.hc) * (column.x_dc - column.dcAlt)));
				column.y_vcy = column.lambdaR * (((column.pga / column.hc) * (newB - (1.2 * column.pga / (column.fc * newH)))) + ((column.ast * column.fy / column.hc) * (column.y_dc - column.dcAlt)));
				column.knl = 0.75;
				column.fyt = row.find('.column-fyt').val();
				column.x_branches = row.find('.column-x-branches').val();
				column.y_branches = row.find('.column-y-branches').val();
				column.ssPhi = row.find('.column-ss-phi').val();
				column.ss = row.find('.column-ss').val();
				column.x_alpha = (column.ss / column.x_dc) < 0.75 ? 1 : 0;
				column.y_alpha = (column.ss / column.y_dc) < 0.75 ? 1 : 0;
				column.x_av = Math.PI * Math.pow((column.ssPhi / 10), 2) / 4 * column.x_branches;
				column.y_av = Math.PI * Math.pow((column.ssPhi / 10), 2) / 4 * column.y_branches;
				column.mvd = 3;
				column.lambdaRAlt = 1;
				column.x_vcv = (column.knl / 2.205) * ((column.x_alpha * (2.205 * column.x_av * column.fyt * column.x_dc / column.ss)) + (column.lambdaRAlt * (22.63 * Math.sqrt(column.fc) / column.mvd * Math.sqrt((1 + ((0.63 * column.pga) / (column.ac * Math.sqrt(column.fc))))) * 0.124 * newB * newH)));
				column.y_vcv = (column.knl / 2.205) * ((column.y_alpha * (2.205 * column.y_av * column.fyt * column.y_dc / column.ss)) + (column.lambdaRAlt * (22.63 * Math.sqrt(column.fc) / column.mvd * Math.sqrt((1 + ((0.63 * column.pga) / (column.ac * Math.sqrt(column.fc))))) * 0.124 * newH * newB)));
				column.x_anchoredBars = row.find('.column-x-anchored-bars').val();
				column.x_anchoredBarsPhi = row.find('.column-x-anchored-bars-phi').val();
				column.y_anchoredBars = row.find('.column-y-anchored-bars').val();
				column.y_anchoredBarsPhi = row.find('.column-y-anchored-bars-phi').val();
				column.x_ab = Math.PI * Math.pow((column.x_anchoredBarsPhi / 10), 2) / 4;
				column.y_ab = Math.PI * Math.pow((column.y_anchoredBarsPhi / 10), 2) / 4;
				column.x_astAlt = column.x_anchoredBars * column.x_ab;
				column.y_astAlt = column.y_anchoredBars * column.y_ab;
				column.cmax = 3;
				column.cmin = 3;
				column.x_ld = 40 * column.x_anchoredBarsPhi / 10;
				column.y_ld = 40 * column.y_anchoredBarsPhi / 10;
				column.x_fa = (Math.pow(column.fc, 1 / 4) / column.x_ab) * ((8.1 * column.x_ld) * (column.cmin + (0.5 * column.x_anchoredBarsPhi / 10)) + (324 * column.x_ab)) * ((0.1 * column.cmax / column.cmin) + 0.9);
				column.y_fa = (Math.pow(column.fc, 1 / 4) / column.y_ab) * ((8.1 * column.y_ld) * (column.cmin + (0.5 * column.y_anchoredBarsPhi / 10)) + (324 * column.y_ab)) * ((0.1 * column.cmax / column.cmin) + 0.9);
				column.x_fs = Math.min(column.x_fa, column.fy);
				column.y_fs = Math.min(column.y_fa, column.fy);
				column.x_vca = ((column.pga / column.hc) * (newH - (1.2 * column.pga / (column.fc * newB)))) + (column.x_astAlt * column.x_fs * (column.x_dc - column.dcAlt) / column.hc);
				column.y_vca = ((column.pga / column.hc) * (newB - (1.2 * column.pga / (column.fc * newH)))) + (column.y_astAlt * column.y_fs * (column.y_dc - column.dcAlt) / column.hc);;
				column.stirrups = row.find('.column-stirrups').val();
				column.stirrupsPhi = row.find('.column-stirrups-phi').val();
				column.x_overlappingBars = row.find('.column-x-overlapping-bars').val();
				column.y_overlappingBars = row.find('.column-y-overlapping-bars').val();
				column.atr = Math.PI * Math.pow(column.ssPhi / 10, 2) / 4;
				column.td = (1.83 * column.stirrupsPhi / 10) + 0.71;
				column.tr = 0.952;
				column.x_faAlt = (Math.pow(column.fc, 1 / 4) / column.x_ab) * ((8.1 * column.x_ld) * (column.cmin + (0.5 * column.x_anchoredBarsPhi / 10)) + (324 * column.x_ab)) * (0.1 * (column.cmax / column.cmin) + 0.9) + (4.2 * column.tr * column.td * ((column.stirrups * column.atr) / column.x_overlappingBars) + 0.4) * (Math.sqrt(column.fc));
				column.y_faAlt = (Math.pow(column.fc, 1 / 4) / column.y_ab) * ((8.1 * column.y_ld) * (column.cmin + (0.5 * column.y_anchoredBarsPhi / 10)) + (324 * column.y_ab)) * (0.1 * (column.cmax / column.cmin) + 0.9) + (4.2 * column.tr * column.td * ((column.stirrups * column.atr) / column.y_overlappingBars) + 0.4) * (Math.sqrt(column.fc));
				column.x_fsAlt = Math.min(column.x_faAlt, column.fy);
				column.y_fsAlt = Math.min(column.y_faAlt, column.fy);
				column.x_vct = ((column.pga / column.hc) * (newH - (1.2 * column.pga / (column.fc * newB)))) + (column.x_astAlt * column.x_fsAlt * (column.x_dc - column.dcAlt) / column.hc);
				column.y_vct = ((column.pga / column.hc) * (newB - (1.2 * column.pga / (column.fc * newH)))) + (column.y_astAlt * column.y_fsAlt * (column.y_dc - column.dcAlt) / column.hc);
				column.x_bCrit = beamsMap[row.find('.column-x-b-crit').val()];
				column.y_bCrit = beamsMap[row.find('.column-y-b-crit').val()];
				column.x_bj = (Number(column.x_bCrit.b) + Number(newB)) / 2;
				column.y_bj = (Number(column.y_bCrit.b) + Number(newH)) / 2;
				column.x_dv = 8 * column.x_bCrit.h / 9;
				column.y_dv = 8 * column.y_bCrit.h / 9;
				column.x_jb = 7 * column.x_bCrit.h / 8;
				column.y_jb = 7 * column.y_bCrit.h / 8;
				column.kjs = 1 + (4 / 9) * ((column.pga / (column.ac * column.fc)) - 0.15);
				column.x_gamma = 3 * (Math.sqrt(newH / column.x_bCrit.h)) * column.kjs;
				column.y_gamma = 3 * (Math.sqrt(newB / column.y_bCrit.h)) * column.kjs;
				column.x_vj = column.x_gamma * Math.sqrt(column.fc);
				column.y_vj = column.y_gamma * Math.sqrt(column.fc);
				column.x_Vj = column.lambdaR * ((column.x_bj * newH * column.x_jb * column.x_vj) / (column.hc * (1 - (newH / column.x_bCrit.lv) - (column.x_jb / column.hc))));
				column.y_Vj = column.lambdaR * ((column.y_bj * newB * column.y_jb * column.y_vj) / (column.hc * (1 - (newB / column.y_bCrit.lv) - (column.y_jb / column.hc))));
				column.x_pv = Number(row.find('.column-x-pv').val());
				column.y_pv = Number(row.find('.column-y-pv').val());
				column.lambdaRAux = 1;
				column.x_vvx = column.lambdaRAux * ((0.85 * column.x_pv * column.x_bCrit.b * Math.pow(column.x_dv, 2) * column.fy) / column.hc);
				column.y_vvx = column.lambdaRAux * ((0.85 * column.y_pv * column.y_bCrit.b * Math.pow(column.y_dv, 2) * column.fy) / column.hc);
				column.x_rcy = column.x_dc / column.x_dc;
				column.x_rcv = column.x_vcv / column.x_vcy;
				column.x_rca = column.x_vca / column.x_vcy;
				column.x_rct = column.x_vct / column.x_vcy;
				column.x_rj = column.x_Vj / column.x_vcy;
				column.x_rby = column.x_vvx / column.x_vcy;
				column.x_rc = Math.min(column.x_rcy, column.x_rcv, column.x_rca, column.x_rct, column.x_rj);
				column.y_rcy = column.y_dc / column.y_dc;
				column.y_rcv = column.y_vcv / column.y_vcy;
				column.y_rca = column.y_vca / column.y_vcy;
				column.y_rct = column.y_vct / column.y_vcy;
				column.y_rj = column.y_Vj / column.y_vcy;
				column.y_rby = column.y_vvx / column.y_vcy;
				column.y_rc = Math.min(column.y_rcy, column.y_rcv, column.y_rca, column.y_rct, column.y_rj);

				if (x_rcMap[column.floor.floor] == undefined) {
					x_rcMap[column.floor.floor] = [];
				}
				x_rcMap[column.floor.floor].push(column.x_rc);
				if (column.x_rc > column.x_rby)
					column.x_result = "Falla por flexión en vigas";
				else if (column.x_rc <= column.x_rby && column.x_rc < 1)
					column.x_result = "Mecanismo de falla frágil";
				else
					column.x_result = "Falla por flexión en columnas";
				if (y_rcMap[column.floor.floor] == undefined) {
					y_rcMap[column.floor.floor] = [];
				}
				y_rcMap[column.floor.floor].push(column.y_rc);
				if (column.y_rc > column.y_rby)
					column.y_result = "Falla por flexión en vigas";
				else if (column.y_rc <= column.y_rby && column.y_rc < 1)
					column.y_result = "Mecanismo de falla frágil";
				else
					column.y_result = "Falla por flexión en columnas";

				// step iii

				column.nv = row.find('.column-nv').val();
				column.nc = row.find('.column-nc').val();

				columnsMap[floor + col] = column;
			});

			console.log('pgMap', pgMap);
			console.log('x_rcMap', x_rcMap);
			console.log('y_rcMap', y_rcMap);
			console.log('x_kiMap', x_kiMap);
			console.log('y_kiMap', y_kiMap);
			console.log(columnsMap);
			var x_kis = [];
			var y_kis = [];
			for (const [key, value] of Object.entries(x_kiMap)) {
				x_kis.push(value);
			}
			for (const [key, value] of Object.entries(y_kiMap)) {
				y_kis.push(value);
			}

			console.log('x_kis', x_kis);
			console.log('y_kis', y_kis);

			var x_deformedShape = new DeformedShape(Number($('.floors').val()), x_kis);
			var y_deformedShape = new DeformedShape(Number($('.floors').val()), y_kis);
			var x_deltaPhiMap = [];
			var y_deltaPhiMap = [];

			console.log('x_deformedShape', x_deformedShape);
			console.log('y_deformedShape', y_deformedShape);

			var lvls = $('.floors').val();
			var x_max = 0;
			var y_max = 0;

			$('.x-lvls .lvl').remove();
			$('.y-lvls .lvl').remove();

			for (i = 1; i <= $('.floors').val(); i++) {
				var row = $('.x-lvl-clonable').clone().removeClass().addClass('lvl');
				row.find('.lvl-label').text(i);
				row.find('.lvl-ki').text(Number.parseFloat(x_kiMap[i]).toFixed(5));
				row.find('.lvl-phi').text(Number.parseFloat(x_deformedShape[i - 1]).toFixed(3));
				var delta = i == 1 ? Number.parseFloat(x_deformedShape[i - 1]) :
					Number.parseFloat(x_deformedShape[i - 1] - x_deformedShape[i - 2]);
				if (delta > x_max)
					x_max = i;
				row.find('.lvl-delta-phi').text(delta.toFixed(3));
				x_deltaPhiMap.push(delta);
				row.appendTo($('.x-lvls'));
				var row = $('.y-lvl-clonable').clone().removeClass().addClass('lvl');
				row.find('.lvl-label').text(i);
				row.find('.lvl-ki').text(Number.parseFloat(y_kiMap[i]).toFixed(5));
				row.find('.lvl-phi').text(Number.parseFloat(y_deformedShape[i - 1]).toFixed(3));
				var delta = i == 1 ? Number.parseFloat(y_deformedShape[i - 1]) :
					Number.parseFloat(y_deformedShape[i - 1] - y_deformedShape[i - 2]);
				if (delta > y_max)
					y_max = i;
				row.find('.lvl-delta-phi').text(delta.toFixed(3));
				y_deltaPhiMap.push(delta);
				row.appendTo($('.y-lvls'));
			}

			console.log('x_deltaPhiMap', x_deltaPhiMap);
			console.log('y_deltaPhiMap', y_deltaPhiMap);

			// step iii

			$('.loads-tbl .cloned').each(function(idx) {
				var row = $(this);
				var x_sa = row.find('.column-x-sa').val();
				var y_sa = row.find('.column-y-sa').val();
				var xColumn = columnsMap['F' + x_max + 'C' + (idx + 1)]; // TODO buscar por otro código
				var yColumn = columnsMap['F' + y_max + 'C' + (idx + 1)]; // TODO buscar por otro código
				var nv = xColumn.nv;
				var nc = xColumn.nc;
				var load = new Load('F' + (idx + 1), 'C' + (idx + 1), idx, x_sa, y_sa);
				load.x_eclb = (xColumn.x_bCrit.b * Math.pow(xColumn.x_bCrit.h, 3) / 12) * xColumn.ec;
				load.y_eclb = (yColumn.y_bCrit.b * Math.pow(yColumn.y_bCrit.h, 3) / 12) * yColumn.ec;
				load.x_eclc = (xColumn.h * Math.pow(xColumn.b, 3) / 12) * xColumn.ec;
				load.y_eclc = (yColumn.b * Math.pow(yColumn.h, 3) / 12) * yColumn.ec;
				if (x_sa) {
					load.x_ohook = (nv * load.x_eclb * xColumn.hc) / (nc * load.x_eclc * xColumn.x_bCrit.lv);
					load.x_ohookc = load.x_ohook / (1 + load.x_ohook);
					if (x_ohookcMap[xColumn.floor.floor] == undefined) {
						x_ohookcMap[xColumn.floor.floor] = [];
					}
					x_ohookcMap[xColumn.floor.floor].push(load.x_ohookc);
				} else {
					load.x_ohook = null;
					load.x_ohookc = null;
				}
				if (y_sa) {
					load.y_ohook = (nv * load.y_eclb * yColumn.hc) / (nc * load.y_eclc * yColumn.y_bCrit.lv);
					load.y_ohookc = load.y_ohook / (1 + load.y_ohook);
					if (y_ohookcMap[yColumn.floor.floor] == undefined) {
						y_ohookcMap[yColumn.floor.floor] = [];
					}
					y_ohookcMap[yColumn.floor.floor].push(load.y_ohookc);
				} else {
					load.y_ohook = null;
					load.y_ohookc = null;
				}
				loadsMap[idx] = load;
			});

			console.log('x_ohookcMap', x_ohookcMap);
			console.log('y_ohookcMap', y_ohookcMap);
			console.log('loadsMap', loadsMap);

			var table = document.getElementById('x-lvls'),
				rows = table.rows;
			for (var i = 0; i < rows.length; i++) {
				rows[i].parentNode.insertBefore(rows[rows.length - 1], rows[i]);
			}
			var table = document.getElementById('y-lvls'),
				rows = table.rows;
			for (var i = 0; i < rows.length; i++) {
				rows[i].parentNode.insertBefore(rows[rows.length - 1], rows[i]);
			}

			$('.x-lvl-txt').text(x_max);
			$('.y-lvl-txt').text(y_max);

			$('.cols-step .col-step').remove();

			for (const key in columnsMap) {
				var row = $('.col-step-clonable').clone().removeClass().addClass('col-step');
				row.find('.floor').text(columnsMap[key].floor.floor);
				row.find('.column').text(columnsMap[key].col);
				row.find('.x_result').text(columnsMap[key].x_result);
				row.find('.y_result').text(columnsMap[key].y_result);
				row.appendTo($('.cols-step'));
			}

			$('.finals-step .final-step').remove();

			for (i = 1; i <= $('.floors').val(); i++) {
				var row = $('.final-step-clonable').clone().removeClass().addClass('final-step');
				row.find('.floor').text('Peso total nivel ' + i);
				row.find('.x-value').text(parseFloat(pgMap[i]).toFixed(2) + ' Kg');
				row.find('.y-value').text(parseFloat(pgMap[i]).toFixed(2) + ' Kg');
				row.appendTo($('.finals-step'));
			}


			var table = document.getElementById('finals-step'),
				rows = table.rows;
			for (var i = 0; i < rows.length; i++) {
				rows[i].parentNode.insertBefore(rows[rows.length - 1], rows[i]);
			}

			var x_M = 0;
			var x_K = 0;
			var x_L = 0;
			for (i = 1; i <= $('.floors').val(); i++) {
				x_M += pgMap[i] * Math.pow(x_deformedShape[i - 1], 2);
				x_K += x_kiMap[i] * Math.pow(x_deltaPhiMap[i - 1], 2);
				x_L += pgMap[i] * x_deformedShape[i - 1];
			}
			var x_yc = parseFloat(getAverage(x_ohookcMap[x_max])).toFixed(2);
			var x_tmpCol = 'F' + x_max + 'C' + x_max;
			var x_phicdem = getAverage(x_ohookcMap[x_max]) * (x_deltaPhiMap[x_max - 1] / columnsMap[x_tmpCol].hc) * loadsMap[x_max - 1].x_sa * (x_L / (980 * x_K));
			var x_phiccap = getAverage(x_rcMap[x_max]) * 0.005;
			var x_rdc = parseFloat(x_phicdem / x_phiccap).toFixed(3);

			var y_M = 0;
			var y_K = 0;
			var y_L = 0;
			for (i = 1; i <= $('.floors').val(); i++) {
				y_M += pgMap[i] * Math.pow(y_deformedShape[i - 1], 2);
				y_K += y_kiMap[i] * Math.pow(y_deltaPhiMap[i - 1], 2);
				y_L += pgMap[i] * y_deformedShape[i - 1];
			}
			var y_yc = parseFloat(getAverage(y_ohookcMap[y_max])).toFixed(2);
			var y_tmpCol = 'F' + y_max + 'C' + y_max;
			var y_phicdem = getAverage(y_ohookcMap[y_max]) * (y_deltaPhiMap[y_max - 1] / columnsMap[y_tmpCol].hc) * loadsMap[y_max - 1].y_sa * (y_L / (980 * y_K));
			var y_phiccap = getAverage(y_rcMap[y_max]) * 0.005;
			var y_rdc = parseFloat(y_phicdem / y_phiccap).toFixed(3);

			var newRow = null;
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('M*');
			newRow.find('.x-value').text(parseFloat(x_M).toFixed(2) + ' Kg');
			newRow.find('.y-value').text(parseFloat(y_M).toFixed(2) + ' Kg');
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('K*');
			newRow.find('.x-value').text(parseFloat(x_K).toFixed(2) + ' Kg/cm');
			newRow.find('.y-value').text(parseFloat(y_K).toFixed(2) + ' Kg/cm');
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('L*');
			newRow.find('.x-value').text(parseFloat(x_L).toFixed(2) + ' Kg');
			newRow.find('.y-value').text(parseFloat(y_L).toFixed(2) + ' Kg');
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('T1');
			newRow.find('.x-value').text(parseFloat(2 * Math.PI * Math.sqrt(x_M / (980 * x_K))).toFixed(2) + ' s');
			newRow.find('.y-value').text(parseFloat(2 * Math.PI * Math.sqrt(y_M / (980 * y_K))).toFixed(2) + ' s');
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('Yc');
			newRow.find('.x-value').text(x_yc);
			newRow.find('.y-value').text(y_yc);
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('ϴc dem');
			newRow.find('.x-value').text(parseFloat(x_phicdem).toFixed(3));
			newRow.find('.y-value').text(parseFloat(y_phicdem).toFixed(3));
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('ϴcy');
			newRow.find('.x-value').text(parseFloat(0.005).toFixed(3));
			newRow.find('.y-value').text(parseFloat(0.005).toFixed(3));
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('Rc falla');
			newRow.find('.x-value').text(parseFloat(getAverage(x_rcMap[x_max])).toFixed(2));
			newRow.find('.y-value').text(parseFloat(getAverage(y_rcMap[y_max])).toFixed(2));
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('ϴc cap');
			newRow.find('.x-value').text(parseFloat(x_phiccap).toFixed(3));
			newRow.find('.y-value').text(parseFloat(y_phiccap).toFixed(3));
			newRow.appendTo($('.finals-step'));
			newRow = $('.final-step-clonable').clone().removeClass().addClass('final-step');
			newRow.find('.floor').text('R D/C');
			newRow.find('.x-value').text(x_rdc);
			newRow.find('.y-value').text(y_rdc);
			newRow.appendTo($('.finals-step'));

			$('.step-i').removeClass('d-none');
			$('.step-ii').removeClass('d-none');
			$('.step-iii').removeClass('d-none');

			$('html, body').animate({
				scrollTop: $("#step-i").offset().top
			}, 100);

		});


	});
	</script>
</body>

</html>